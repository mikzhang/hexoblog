---
title: Vim-复制粘贴
date: 2017-09-06 12:52:48
categories: Vim
tags:
    - Vim
---

Vim 寄存器可存储多个复制内容, 大大提高编辑效率

<!-- more -->


## vim常用复制粘贴命令

Vim的复制粘贴命令无疑是 y (yank),p(paster),加上yy,P

PS:

vim有个很有意思的约定(我觉得是一种约定),就是某个命令的大小写都是实现某种功能,只是方向不同,比如;
```
w 跳转到下个word,
W 跳转到上个word 

f 某行正向查找并跳转
F 反向....  
```
然后部分双写的字母有行操作;
```
yy   复制一行  
dd   删除一行  
```
所以, p 就是在当前光标后粘贴, P 就是在当前光标前粘贴  

另外,说完 p, 其实还有几个命令有时也是很有用的
```
gp,和p的功能基本一致,只是粘贴完,它会把光标移动至粘贴内容之后；gP同理  
  
:pu[t] ,注意,这个是在命令界面输入的pu/put,它的意思是把x寄存器的内容粘贴到下一行 
```

## vim的寄存器

### 寄存器简介

vim强大之处之一就是它自带一堆寄存器,每个寄存器独立使用,你可以在不同寄存器中存储不同数据,命令,你可以把这个想象成一个加强版的剪贴板,当然它的功能不止剪贴板这么简单。如果你想看vim的官方文档有关部分;
```
:help  registers  
```

根据官方手册;vim有9种寄存器
```
There are nine types of registers:                      registers E354
1. The unnamed register ""
2. 10 numbered registers "0 to "9
3. The small delete register "-
4. 26 named registers "a to "z or "A to "Z 
5. four read-only registers ":, "., "% and "#
6. the expression register "=
7. The selection and drop registers "*, "+ and "~ 
8. The black hole register "_
9. Last search pattern register "/
```

各个寄存器:
```
1. 无名(unnamed)寄存器;"",缓存最后一次操作内容；
2. 数字(numbered)寄存器;"0 ～"9,缓存最近操作内容,复制与删除有别, "0 寄存器缓存最近一次复制的内容,"1-"9 缓存最近9次删除内容
3. 行内删除(small delete)寄存器;"-,缓存行内删除内容；
4. 具名(named)寄存器;"a ～ "z 或 "A - "0Z,指定时可用；
5. 只读(read-only)寄存器;":,".,"%,"#,分别缓存最近命令、最近插入文本、当前文件名、当前交替文件名；
6. 表达式(expression)寄存器;"=,只读,用于执行表达式命令；
7. 选择及拖拽(selection and drop)寄存器  "*,"+,"~ `存取GUI选择文本,可用于与外部应用交互,使用前提为系统剪切板(clipboard)可用；
8. 黑洞(black hole)寄存器;"_,不缓存操作内容(干净删除)；
9. 模式寄存器(last search pattern);"/,缓存最近的搜索模式。
```
至于每个寄存器更加具体的使用方法,我希望大家能查询手册

### 基本操作

现在输入命令,你就可以查询一下目前寄存器的情况
```
:reg  
```
寄存器的使用方法也很简单;通过 " 加上 寄存器名,就可以访问特定的寄存器;
```
"ap      粘贴字母a寄存器内容  
"1y      把选取内容复制到数字寄存器1  
```

要将vim的内容复制到某个粘贴板, 需要退出编辑模式, 进入正常模式后, 选择要复制的内容, 然后按 "Ny 完成复制, 其中 N 为粘贴板号(注意是按一下双引号然后按粘贴板号最后按y),例如要把内容复制到粘贴板 a, 选中内容后按 "ay 就可以了,有两点需要说明一下:

- ; 号粘贴板(临时粘贴板)比较特殊, 直接按 y 就复制到这个粘贴板中了, 直接按 p 就粘贴这个粘贴板中的内容;
- \+ 号粘贴板是系统粘贴板,用"+y 将内容复制到该粘贴板后可以使用 Ctrl＋V 将其粘贴到其他文档(如firefox、gedit)中,同理,要把在其他地方用 Ctrl＋C 或右键复制的内容复制到vim中,需要在正常模式下按 "+p ;
要将vim某个粘贴板里的内容粘贴进来, 需要退出编辑模式, 在正常模式按 "Np, 其中N为粘贴板号, 如上所述, 可以按 "5p 将5号粘贴板里的内容粘贴进来, 也可以按 "+p 将系统全局粘贴板里的内容粘贴进来。

## 系统剪贴板

细心的人已经发现我重点标注的寄存器部分了,就是那个选择及拖拽寄存器,这就是系统的剪贴板,我们通常使用的 ctrl+c  ctrl+v 的内容就保存在这个寄存器中,所以你要把需要复制的内容放在 + 寄存器中,就可以在gui界面中用粘贴或 ctrl+v 粘贴了,同理,粘贴在vim中也一样
```
"+y    复制到系统剪贴板  
"+p    粘贴  
"+gp  粘贴并且移动光标到粘贴内容后  
```
但是光是输入命令 "+p 就已经让人觉得很麻烦了,这时候,vim的map功能就又可以大显神通了,我们只需要把"+y  和 "+gp  map到你喜欢的快捷键上即可;

首先打开vimrc(如果没有,请创建一个)
```
vim ~/.vimrc  
```
然后在其中输入;
```
nmap <c-v> "+gp  
nmap <c-c> "+y  
```
你现在就可以使用ctrl+c  和ctrl+v 了,但是！我本人是不推荐用这个快捷键的,因为本身<c-v>是我很常用的块命令
所以,我一般修改成;
```
nmap <leader>v "+gp  
nmap <leader>c "+y  
```
至于<leader>是什么按键,就可以按照你的喜好来, 我的是','
```
let mapleader=","  
```

ref:
[http://blog.csdn.net/hk2291976/article/details/42196559](http://blog.csdn.net/hk2291976/article/details/42196559)
